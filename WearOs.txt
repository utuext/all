java file


package com.example.wearos;

import android.app.Activity;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageView;
import android.widget.TextView;

import androidx.wear.widget.CircularProgressLayout;

import com.example.wearos.databinding.ActivityMainBinding;

public class MainActivity extends Activity {
    TextView tv1;
    private ActivityMainBinding binding;
    private CircularProgressLayout cpl;
    ImageView img1;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        binding = ActivityMainBinding.inflate(getLayoutInflater());
        setContentView(binding.getRoot());
        img1=findViewById(R.id.imgv1);
        tv1=findViewById(R.id.tv1);
        cpl=(CircularProgressLayout)findViewById(R.id.delayed_confirm);
       // cpl.setOnTimerFinishedListener((CircularProgressLayout.OnTimerFinishedListener) this);
        cpl.setTotalTime(5000);
        String fnm = "green"; //  this is image file name
        String PACKAGE_NAME = getApplicationContext().getPackageName();
        int imgId = getResources().getIdentifier(PACKAGE_NAME+":drawable/"+fnm , null, null);
        System.out.println("IMG ID :: "+imgId);
        System.out.println("PACKAGE_NAME :: "+PACKAGE_NAME);

        cpl.setOnTimerFinishedListener(new CircularProgressLayout.OnTimerFinishedListener() {
            @Override
            public void onTimerFinished(CircularProgressLayout layout) {
                img1.setImageBitmap(BitmapFactory.decodeResource(getResources(),imgId));
                tv1.setText("Message sent");
            }
        });
        cpl.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // if(v.equals(cpl))
                // {

                cpl.startTimer();
                //}
            }
        });
    }
}

XML File

<?xml version="1.0" encoding="utf-8"?>
<androidx.wear.widget.BoxInsetLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="@dimen/box_inset_layout_padding"
    tools:context=".MainActivity"
    tools:deviceIds="wear">
    <androidx.wear.widget.CircularProgressLayout
        android:id="@+id/delayed_confirm"
        android:layout_width="match_parent"
        android:layout_height="match_parent"

        >

        <ImageView
            android:id="@+id/imgv1"
            android:layout_width="80dp"
            android:layout_height="73dp"
            android:src="@drawable/red" />
        <TextView
            android:id="@+id/tv1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="Sneding Message"
            />


    </androidx.wear.widget.CircularProgressLayout>


</androidx.wear.widget.BoxInsetLayout>
